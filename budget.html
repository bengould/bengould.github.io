<!DOCTYPE HTML>
<!--
	Ion by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Ben Gould for Mayor of Berkeley</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
		</noscript>
        
        <!-- Google Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-74684266-1', 'auto');
          ga('send', 'pageview');

        </script>
        
        <style>
        svg text {
            font-family: "Open Sans", sans-serif;
            font-size: 14px;
            font-weight: 800;
        }
        .node rect {
          cursor: move;
          fill-opacity: .9;
          shape-rendering: crispEdges;
        }
        .node text {
          pointer-events: none;
          /*text-shadow: 0 1px 0 #fff;*/
          font-family: "Open Sans", sans-serif;
          font-size: 13px;
          font-weight: 200;
        }
        .link {
          fill: none;
          stroke: #000;
          stroke-opacity: .3;
        }
        .link.text {
            visibility:hidden;
        }
        .link:hover {
          stroke-opacity: .75;
        }
        #hover_description {
            position:absolute;
            opacity:0;
            padding:8px;
            background-color:#dfdfdf;
            visibility:hidden;
            /*-webkit-transition:visibility 0s 0.1s,opacity 0.1s;*/
            transition:visibility 0s 0.1s,opacity 0.1s;
            font-size:14px;
        }
        #hover_description.show {
            visibility:visible;
            opacity:0.85;   
            /*-webkit-transition-delay:0s;*/
            transition-delay:0s;
        }
        .node.highlight text, .node.hover text {
            font-size:15px;
        }
        .node.highlight rect, .node.hover rect {
            stroke-width:2px;
        }
        select {
            
        }
    </style>
	</head>
	<body id="top">

		<!-- Header -->
			<header id="header" class="skel-layers-fixed">
				<h1><a href="http://www.bengould.org"><img src="images/logo_v3_trim.png" height=65em style="margin-top: 0.3em; margin-bottom: 0.3em"></a></h1>
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="index.html#vision">Meet Ben</a></li>
						<li><a href="issues.html">Issues</a></li>
                        <li><a href="voting.html">Voting</a></li>
                        <li><a href="endorse.html">Endorsements</a></li>
                        <li><a href="index.html#join">Get Involved</a></li>
                        <li style="display:none"><a href="index.html#contact">Contact</a></li>
                        
						<li><a href="donate.html" class="button special">Donate</a></li>
					</ul>
				</nav>
			</header>

		<!-- Main -->
			<section id="main" class="wrapper style1">
				<header class="major">
					<h2>Berkeley's Budget</h2>
				</header>
				<div class="container">
					<div class="row">
						<div class="8u">
							<section>
								<h2>Interactive Visualization</h2>
								<div id="chart">
                                        <b><div id="hover_description"></div></b>
                                    </div>
							</section>
						</div>
						<div class="4u" id="sidebar">
							<section>
								<h3>Annual Budget</h3>
								<p>This diagram depicts the flow of money through the City of Berkeley: from sources of revenue (left) through funds (General and Restricted) into departmental expenses (right).</p>
                                <p>You can select a fiscal year (2013 through 2017) using the drop-down menu below. (FY 2013 and 2014 are real revenues & expenditures, FY 2015 is approved budget, and FY 2016 and 2017 are proposed budgets).</p>
                                <p>Mouse over the chart to see specific dollar amounts!</p>
								<text>Select a year:</text>
                                <p><select id="fy"></select></p>
							</section>
							<hr />
							<section>
								<h3>Learn more</h3>
								<ul class="alt">
                                    <li><a href="http://www.ci.berkeley.ca.us/City_Manager/Press_Releases/2015/2015-11-10_Berkeleyan_s_activism_offers_glimpse_at_the_power_of_Open_Data.aspx">Press Release</a></li>
									<li><a href="http://www.ci.berkeley.ca.us/budget/">City of Berkeley Budget Office</a></li>
									<li><a href="http://www.ci.berkeley.ca.us/uploadedFiles/Manager/Budget/FY%202016%20and%20FY%202017%20Final%20Adopted%20Biennial%20Budget%20Book.pdf">FY 2016-2017 Adopted Biennial Budget</a></li>
									<li><a href="http://www.ci.berkeley.ca.us/uploadedFiles/Manager/Budget/FY%202016%20and%20FY%202017%20Final%20Adopted%20CIP%20Book.pdf">FY 2016-2017 Adopted Capital Improvement Plan</a></li>
                                    <li>Inspired by <a href="http://openbudgetoakland.org/">Open Budget Oakland</a></li>
								</ul>
							</section>
						</div>
					</div>
					
				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<div class="row double">
						<div class="6u">
							<h2 id="contact">Connect with us</h2>
                            <ul class="actions">
										<li>Make your voice heard - email Ben directly at <a href="mailto:ben@bengould.org">ben@bengould.org</a></li>
										<li>Media inquiries? <a href="mailto:media@bengould.org">media@bengould.org</a></li>
                                        <br>
										<li>Connect on social media below</li>
									</ul>
							<ul class="icons">
								<li><a href="http://www.twitter.com/bgouldformayor" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
								<li><a href="http://www.facebook.com/bgouldformayor" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
                                <li><a href="http://www.instagram.com/bgouldformayor" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
							</ul>
						</div>
					</div>
					<ul class="copyright">
						<li>&copy; Ben Gould for Mayor 2016, FPPC ID # 1385186. All rights reserved.</li>
						<li>Design: <a href="http://templated.co">TEMPLATED</a></li>
						<li>Images: <a href="http://unsplash.com">Unsplash</a> and <a href="https://www.flickr.com/photos/parksdh/">Daniel Parks</a></li>
					</ul>
				</div>
			</footer>
        
        <script src="js/sankey.js"></script>
        <script src="js/budgetvis.js"></script>
        <script type="text/javascript">
            var w = $("#chart").width();
            if ($(window).width() < 960) {
                d3.select("#chart").html('<ul class="actions"><li><i class="icon fa-frown-o"></i></li><li>Unable to display the visualization </li><li>To maintain readability, this chart can only be viewed on larger screens.</li></ul>');
                d3.select("#sidebar").html('<h3>Return to home</h3><a href="index.html" class="image fit"><i class="icon fa-home major"></i></a>');
            } else {
                d3.csv("/Budget data/fy2013budget.csv", function(error, data) {
                        vis(data, w, 630);
                    });
                for (var i = 2013; i < 2018; i++) {
                    d3.select("#fy").append("option").attr("value", function() {return ("fy" + i);}).text(function() {return ("FY " + i)});
                }
                $("#fy").change(function () {
                    d3.csv("/Budget data/" + fy.value + "budget.csv", function(error, data) {
                        d3.select(".sankeyChart").remove();
                        vis(data, w, 630);
                    });

                });
            }
        </script>

	</body>
</html>